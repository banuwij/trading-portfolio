{% extends "base.html" %}
{% block content %}
<h1 style="margin:0 0 6px;">New Trade</h1>
<p style="font-size:12px;color:#9ca3af;margin:0 0 10px;">
  Log a new trade with outlook screenshot and planned risk.
</p>

<div class="card">
  <form action="{{ url_for('new_trade') }}" method="post" enctype="multipart/form-data"
        style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;">

    <div>
      <div style="margin-bottom:8px;">
        <label>Trade Date</label>
        <input type="date" name="trade_date" value="{{ today }}">
      </div>
      <div style="margin-bottom:8px;">
        <label>Symbol / Pair</label>
        <input name="symbol" placeholder="e.g. BTCUSDT, ANTM, BBCA">
      </div>
      <div style="margin-bottom:8px;">
        <label>Timeframe</label>
        <input name="timeframe" placeholder="H1, H4, D1">
      </div>
      <div style="margin-bottom:8px;">
        <label>Direction</label>
        <select name="direction">
          <option value="">--</option>
          <option value="BUY">BUY</option>
          <option value="SELL">SELL</option>
        </select>
      </div>
      <div style="margin-bottom:8px;">
        <label>Entry Price</label>
        <input type="number" step="0.0001" name="entry_price">
      </div>
      <div style="margin-bottom:8px;">
        <label>Stop Loss</label>
        <input type="number" step="0.0001" name="stop_loss">
      </div>
      <div style="margin-bottom:8px;">
        <label>Take Profit</label>
        <input type="number" step="0.0001" name="take_profit">
      </div>
      <div style="margin-bottom:8px;">
        <label>Risk per Trade (% equity)</label>
        <input type="number" step="0.01" name="risk_percent" placeholder="e.g. 0.5, 1, 2">
      </div>
      <div style="margin-bottom:8px;">
        <label>Result</label>
        <select name="result">
          <option value="">Pending / N/A</option>
          <option value="WIN">WIN</option>
          <option value="LOSE">LOSE</option>
        </select>
      </div>
      <div style="margin-bottom:8px;">
        <label>Grade</label>
        <select name="grade">
          <option value="">--</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
        </select>
      </div>
      <div style="margin-bottom:8px;">
        <label>Strategy / Setup</label>
        <select name="strategy_tag">
          <option value="">--</option>
          <option value="Supply/Demand">Supply/Demand</option>
          <option value="Liquidity Sweep">Liquidity Sweep</option>
          <option value="Break & Retest">Break & Retest</option>
          <option value="Trend Continuation">Trend Continuation</option>
          <option value="Range Reversion">Range Reversion</option>
          <option value="News Catalyst">News Catalyst</option>
          <option value="Fibo Reaction">Fibo Reaction</option>
          <option value="Custom">Custom</option>
        </select>
      </div>
      <div style="margin-bottom:8px;">
        <label>Market Condition</label>
        <select name="market_condition">
          <option value="">--</option>
          <option value="Trending">Trending</option>
          <option value="Choppy">Choppy</option>
          <option value="Range-bound">Range-bound</option>
          <option value="High Volatility">High Volatility</option>
          <option value="News/Event">News/Event Driven</option>
        </select>
      </div>
      <div style="margin-bottom:8px;">
        <label>Status</label>
        <select name="status">
          <option value="Planned">Planned</option>
          <option value="Active">Active</option>
          <option value="Closed">Closed</option>
        </select>
      </div>
      <div style="margin-bottom:8px;">
        <label>Execution Checklist</label>
        <label><input type="checkbox" name="followed_plan"> Followed Plan</label>
        <label><input type="checkbox" name="no_revenge"> No Revenge Trade</label>
        <label><input type="checkbox" name="no_fomo"> No FOMO Entry</label>
        <label><input type="checkbox" name="respected_rr"> Min R:R Respected</label>
      </div>
      <div style="margin-bottom:8px;">
        <label><input type="checkbox" name="featured"> Mark as featured</label>
      </div>
      <div style="margin-bottom:8px;">
        <label>Screenshot BEFORE</label>
        <input type="file" name="screenshot_before" accept="image/*">
      </div>
      <div style="margin-bottom:8px;">
        <label>Screenshot AFTER (optional)</label>
        <input type="file" name="screenshot_after" accept="image/*">
      </div>
    </div>

    <div>
      <div style="margin-bottom:8px;">
        <label>Public summary (for HR)</label>
        <textarea name="notes_public" rows="7"
                  placeholder="Thesis, execution, outcome, and key takeaways in a professional tone."></textarea>
      </div>
      <div style="margin-bottom:8px;">
        <label>Private notes (only you)</label>
        <textarea name="notes_private" rows="7"
                  placeholder="Emotions, micro mistakes, alternative scenarios, deeper review."></textarea>
      </div>
      <div style="margin-top:8px;">
        <button type="submit">Save Trade</button>
      </div>
    </div>

  </form>
</div>
{% endblock %}
